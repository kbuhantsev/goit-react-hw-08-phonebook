"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[396],{5396:function(e,n,r){r.r(n),r.d(n,{default:function(){return ce}});var t,i,o=r(2791),a=r(168),s=r(7691),l=r(8311),c=(s.ZP.label(t||(t=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n"]))),(0,s.ZP)(l.Z)(i||(i=(0,a.Z)(["\n  width: 300px;\n  margin-bottom: '10px';\n"])))),d=r(5048),u=r(1634),h=r(5095),m=r.n(h),p=r(3329);var x,f,Z=function(){var e=(0,d.I0)(),n=m()((function(n){var r=n.target.value;e((0,u.Tv)(r))}),500);return(0,p.jsx)(c,{id:"search",name:"search",label:"Find contacts by name",variant:"standard",sx:{marginBottom:"10px",width:"300px"},onChange:n})},v=r(1413),g=r(5861),j=r(885),b=r(4687),y=r.n(b),w=r(2797),C=r(7205),k=s.ZP.form(x||(x=(0,a.Z)(["\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),S=(0,s.ZP)(C.Z)(f||(f=(0,a.Z)(["\n  width: fit-content;\n"]))),P=r(2419),I=r(1134),_=r(4695),q=r(5985),T=r(3866),z=w.Ry({name:w.Z_().min(3,"Minimum 3 letters!").required("This field is required!"),phone:w.Z_().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Phone number is not valid!").max(13,"Maximum 13 numbers!").required("This field is required!")}).required();function O(){var e=(0,I.cI)({defaultValues:{name:"",phone:""},resolver:(0,_.X)(z)}),n=e.control,r=e.handleSubmit,t=e.reset,i=e.formState,a=i.errors,s=i.isSubmitSuccessful,c=(0,T.wY)().data,d=void 0===c?[]:c,u=(0,T.Tn)(),h=(0,j.Z)(u,2),m=h[0],x=h[1].isLoading,f=function(){var e=(0,g.Z)(y().mark((function e(n){var r,t,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,t=n.phone,i={name:r,phone:t},!d.find((function(e){return e.name===r}))){e.next=5;break}return q.Am.warning("".concat(r," is already in contacts"),{}),e.abrupt("return");case 5:return e.next=7,m(i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.useEffect((function(){s&&(t(),q.Am.success("Contact created"))}),[s,t]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(k,{onSubmit:r(f,(function(e){q.Am.error(e)})),children:[(0,p.jsx)(I.Qr,{name:"name",control:n,render:function(e){var n,r=e.field;return(0,p.jsx)(l.Z,(0,v.Z)((0,v.Z)({},r),{},{label:"Name",variant:"outlined",size:"small",error:a.name&&!0,helperText:null===(n=a.name)||void 0===n?void 0:n.message}))}}),(0,p.jsx)(I.Qr,{name:"phone",control:n,render:function(e){var n,r=e.field;return(0,p.jsx)(l.Z,(0,v.Z)((0,v.Z)({},r),{},{label:"Phone",variant:"outlined",size:"small",error:a.phone&&!0,helperText:null===(n=a.phone)||void 0===n?void 0:n.message}))}}),(0,p.jsx)(S,{type:"submit",variant:"outlined",startIcon:(0,p.jsx)(P.Z,{}),disabled:x,children:"Add contact"})]}),(0,p.jsx)(q.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})}var F,B,A=r(4476),E=r(9963),L=r(1680),M=r(9827),Q=r(807),W=r(9773),D=r(6650),N=r(5399),R=r(5450),G=r(7247),H=r(1286),V=r(4942),X=r(3651),Y=r(1745),J=r(277),K=(0,J.ZP)(X.Z)((function(e){var n,r=e.theme;return n={},(0,V.Z)(n,"&.".concat(Y.Z.head),{backgroundColor:r.palette.primary.main,color:r.palette.common.white,fontSize:r.typography.htmlFontSize,fontWeight:r.typography.fontWeightBold}),(0,V.Z)(n,"&.".concat(Y.Z.body),{fontSize:r.typography.fontSize}),(0,V.Z)(n,"&.MuiTableCell-body:nth-of-type(2)",{fontWeight:r.typography.fontWeightBold}),n})),U=(0,J.ZP)(Q.Z)((function(e){return{"&:nth-of-type(even)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),$=s.ZP.form(F||(F=(0,a.Z)(["\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),ee=(0,s.ZP)(C.Z)(B||(B=(0,a.Z)(["\n  width: fit-content;\n"]))),ne=r(8763),re=r(8074),te=w.Ry({name:w.Z_().min(3,"Minimum 3 letters!").required("This field is required!"),phone:w.Z_().matches(/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/,"Phone number is not valid!").max(13,"Maximum 13 numbers!").required("This field is required!")}).required();function ie(e){var n=e.contact,r=e.setOpen,t=(0,I.cI)({defaultValues:{name:null===n||void 0===n?void 0:n.name,phone:null===n||void 0===n?void 0:n.phone},resolver:(0,_.X)(te)}),i=t.control,a=t.handleSubmit,s=t.reset,c=t.formState,d=c.errors,u=c.isSubmitSuccessful,h=(0,T.i)(),m=(0,j.Z)(h,1)[0],x=function(){var e=(0,g.Z)(y().mark((function e(t){var i,o,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,o=t.phone,a={id:n.id,name:i,phone:o},e.next=4,m(a);case 4:r(!1);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.useEffect((function(){u&&s()}),[u,s]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(re.Z,{variant:"h5",align:"center",gutterBottom:!0,children:"Edit contact"}),(0,p.jsxs)($,{onSubmit:a(x,(function(e){q.Am.error(e)})),children:[(0,p.jsx)(I.Qr,{name:"name",control:i,render:function(e){var n,r=e.field;return(0,p.jsx)(l.Z,(0,v.Z)((0,v.Z)({},r),{},{label:"Name",variant:"outlined",size:"small",error:d.name&&!0,helperText:null===(n=d.name)||void 0===n?void 0:n.message}))}}),(0,p.jsx)(I.Qr,{name:"phone",control:i,render:function(e){var n,r=e.field;return(0,p.jsx)(l.Z,(0,v.Z)((0,v.Z)({},r),{},{label:"Phone",variant:"outlined",size:"small",error:d.phone&&!0,helperText:null===(n=d.phone)||void 0===n?void 0:n.message}))}}),(0,p.jsxs)(A.Z,{flexDirection:"row",gridGap:"10px",justifyContent:"end",children:[(0,p.jsx)(ee,{variant:"contained",onClick:function(){return r(!1)},children:"Cancel"}),(0,p.jsx)(ee,{type:"submit",variant:"outlined",startIcon:(0,p.jsx)(ne.Z,{}),children:"Save"})]})]}),(0,p.jsx)(q.Ix,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})}var oe=function(){var e=(0,o.useState)(!1),n=(0,j.Z)(e,2),r=n[0],t=n[1],i=(0,o.useState)(null),a=(0,j.Z)(i,2),s=a[0],l=a[1],c=(0,T.wY)(),d=c.data,u=void 0===d?[]:d,h=c.error,m=c.isLoading,x=(0,T.Nt)(),f=(0,j.Z)(x,2),Z=f[0],v=f[1].isLoading;return(0,p.jsxs)(p.Fragment,{children:[m&&!h&&(0,p.jsx)("b",{children:"Request in progress..."}),(0,p.jsx)(E.Z,{component:D.Z,sx:{maxWidth:"900px"},children:(0,p.jsxs)(L.Z,{"aria-label":"contacts table",children:[(0,p.jsx)(M.Z,{children:(0,p.jsxs)(Q.Z,{children:[(0,p.jsx)(K,{children:"Contact ID"}),(0,p.jsx)(K,{align:"right",children:"Name"}),(0,p.jsx)(K,{align:"right",children:"Phone"}),(0,p.jsx)(K,{align:"right"})]})}),(0,p.jsx)(W.Z,{children:u.map((function(e){var n=e.id,r=e.name,i=e.phone;return(0,p.jsxs)(U,{children:[(0,p.jsx)(K,{scope:"row",children:n}),(0,p.jsx)(K,{align:"right",children:r}),(0,p.jsx)(K,{align:"right",children:i}),(0,p.jsx)(K,{align:"right",children:(0,p.jsxs)(A.Z,{flexDirection:"row",gridGap:"5px",children:[(0,p.jsx)(C.Z,{variant:"outlined",startIcon:(0,p.jsx)(H.Z,{}),onClick:function(){return function(e){l(e),t(!0)}({id:n,name:r,phone:i})},children:"Edit"}),(0,p.jsx)(C.Z,{variant:"outlined",startIcon:(0,p.jsx)(G.Z,{}),disabled:v,onClick:function(){return function(e){var n=e.id;Z(n)}({id:n})},children:"Delete"})]})})]},n)}))})]})}),(0,p.jsx)(N.Z,{open:r,children:(0,p.jsx)(R.Z,{children:(0,p.jsx)(ie,{contact:s,setOpen:t})})})]})},ae=r(4142),se=r(4746);function le(){var e=(0,ae.Z)(),n=(0,d.I0)(),r=(0,d.v9)(se.Qb);return(0,o.useEffect)((function(){}),[n,r]),(0,p.jsxs)(A.Z,{children:[(0,p.jsx)(A.Z,{as:"h1",pt:"20px",pb:"10px",margin:"0 auto",color:e.palette.text.primary,children:"Phonebook"}),(0,p.jsx)(O,{}),(0,p.jsx)(A.Z,{as:"h2",mb:"0",color:e.palette.text.primary,children:"Contacts"}),(0,p.jsx)(Z,{}),(0,p.jsx)(oe,{}),(0,p.jsx)(q.Ix,{position:"top-right",autoClose:2e3,theme:"colored"})]})}function ce(){return(0,p.jsx)(le,{})}}}]);
//# sourceMappingURL=396.9cb27c1e.chunk.js.map